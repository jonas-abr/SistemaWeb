{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Jonas\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\RestWithASP-NET5Udemy\\\\BONUS_RestWithASPNETUdemy_React\\\\client\\\\src\\\\pages\\\\Books\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { FiPower, FiEdit, FiTrash2 } from 'react-icons/fi';\nimport api from '../../services/api';\nimport './styles.css';\nimport logoImage from \"../../assets/logo.svg\";\nexport default function Books() {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  const [page, setPage] = useState(1);\n  const userName = localStorage.getItem('userName');\n  const accessToken = localStorage.getItem('accessToken');\n  const authorization = {\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  };\n  const history = useHistory();\n  useEffect(() => {\n    fetchMoreBooks();\n  }, [accessToken]);\n\n  async function fetchMoreBooks() {\n    const response = await api.get(`api/Book/v1/asc/4/${page}`, authorization);\n    setBooks([...books, ...response.data.list]);\n    setPage(page + 1);\n  }\n\n  async function logout() {\n    try {\n      await api.get('api/auth/v1/revoke', authorization);\n      localStorage.clear();\n      history.push('/');\n    } catch (err) {\n      alert('Logout failed! Try again!');\n    }\n  }\n\n  async function editBook(id) {\n    try {\n      history.push(`book/new/${id}`);\n    } catch (err) {\n      alert('Edit book failed! Try again!');\n    }\n  }\n\n  async function deleteBook(id) {\n    try {\n      await api.delete(`api/Book/v1/${id}`, authorization);\n      setBooks(books.filter(book => book.id !== id));\n    } catch (err) {\n      alert('Delete failed! Try again!');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logoImage,\n        alt: \"Erudio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Bem vindo !, \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: userName.toLowerCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 36\n        }, this), \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"button\",\n        to: \"book/new/0\",\n        children: \"Adicionar novo livro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        type: \"button\",\n        children: /*#__PURE__*/_jsxDEV(FiPower, {\n          size: 18,\n          color: \"#251FC5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Registrar livros\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"T\\xEDtulo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Author:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: book.author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: Intl.NumberFormat('pt-BR', {\n            style: 'currency',\n            currency: 'BRL'\n          }).format(book.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Release Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: Intl.DateTimeFormat('pt-BR').format(new Date(book.launchDate))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => editBook(book.id),\n          type: \"button\",\n          children: /*#__PURE__*/_jsxDEV(FiEdit, {\n            size: 20,\n            color: \"#251FC5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteBook(book.id),\n          type: \"button\",\n          children: /*#__PURE__*/_jsxDEV(FiTrash2, {\n            size: 20,\n            color: \"#251FC5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)]\n      }, book.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button\",\n      onClick: fetchMoreBooks,\n      type: \"button\",\n      children: \"Load More\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Books, \"T8lVJ0RB3wlXwyWkuAzHyXUZ0mo=\", false, function () {\n  return [useHistory];\n});\n\n_c = Books;\n\nvar _c;\n\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"sources":["C:/Users/Jonas/OneDrive/Área de Trabalho/RestWithASP-NET5Udemy/BONUS_RestWithASPNETUdemy_React/client/src/pages/Books/index.js"],"names":["React","useState","useEffect","Link","useHistory","FiPower","FiEdit","FiTrash2","api","Books","books","setBooks","page","setPage","userName","localStorage","getItem","accessToken","authorization","headers","Authorization","history","fetchMoreBooks","response","get","data","list","logout","clear","push","err","alert","editBook","id","deleteBook","delete","filter","book","logoImage","toLowerCase","map","title","author","Intl","NumberFormat","style","currency","format","price","DateTimeFormat","Date","launchDate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { FiPower, FiEdit, FiTrash2 } from 'react-icons/fi'\r\n\r\nimport api from '../../services/api';\r\n\r\nimport './styles.css';\r\n\r\nimport logoImage from '../../assets/logo.svg'\r\n\r\nexport default function Books(){\r\n\r\n    const [books, setBooks] = useState([]);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const userName = localStorage.getItem('userName');\r\n    const accessToken = localStorage.getItem('accessToken');\r\n\r\n    const authorization = {\r\n        headers: {\r\n            Authorization: `Bearer ${accessToken}`\r\n        }\r\n    }\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        fetchMoreBooks();\r\n    }, [accessToken]);\r\n\r\n    async function fetchMoreBooks() {\r\n        const response = await api.get(`api/Book/v1/asc/4/${page}`, authorization);\r\n        setBooks([ ...books, ...response.data.list]);\r\n        setPage(page + 1);\r\n    }\r\n    \r\n    async function logout() {\r\n        try {\r\n            await api.get('api/auth/v1/revoke', authorization);\r\n\r\n            localStorage.clear();\r\n            history.push('/');\r\n        } catch (err) {\r\n            alert('Logout failed! Try again!');\r\n        }\r\n    }\r\n    \r\n    async function editBook(id) {\r\n        try {\r\n            history.push(`book/new/${id}`)\r\n        } catch (err) {\r\n            alert('Edit book failed! Try again!');\r\n        }\r\n    }\r\n\r\n    async function deleteBook(id) {\r\n        try {\r\n            await api.delete(`api/Book/v1/${id}`, authorization);\r\n\r\n            setBooks(books.filter(book => book.id !== id))\r\n        } catch (err) {\r\n            alert('Delete failed! Try again!');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"book-container\">\r\n            <header>\r\n                <img src={logoImage} alt=\"Erudio\"/>\r\n                <span>Bem vindo !, <strong>{userName.toLowerCase()}</strong>!</span>\r\n                <Link className=\"button\" to=\"book/new/0\">Adicionar novo livro</Link>\r\n                <button onClick={logout} type=\"button\">\r\n                    <FiPower size={18} color=\"#251FC5\" />\r\n                </button>\r\n            </header>\r\n\r\n            <h1>Registrar livros</h1>\r\n            <ul>\r\n                {books.map(book => (\r\n                    <li key={book.id}>\r\n                        <strong>Título:</strong>\r\n                        <p>{book.title}</p>\r\n                        <strong>Author:</strong>\r\n                        <p>{book.author}</p>\r\n                        <strong>Price:</strong>\r\n                        <p>{Intl.NumberFormat('pt-BR', {style: 'currency', currency: 'BRL'}).format(book.price)}</p>\r\n                        <strong>Release Date:</strong>\r\n                        <p>{Intl.DateTimeFormat('pt-BR').format(new Date(book.launchDate))}</p>\r\n                        \r\n                        <button onClick={() => editBook(book.id)} type=\"button\">\r\n                            <FiEdit size={20} color=\"#251FC5\"/>\r\n                        </button>\r\n                        \r\n                        <button onClick={() => deleteBook(book.id)} type=\"button\">\r\n                            <FiTrash2 size={20} color=\"#251FC5\"/>\r\n                        </button>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n            <button className=\"button\" onClick={fetchMoreBooks} type=\"button\">Load More</button>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}